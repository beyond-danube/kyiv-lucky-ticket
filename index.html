<!DOCTYPE html>
<html>
<head>
    <title>Kyiv Lucky Ticket</title>

    <!-- ADD ANALYTICS
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '');
    </script>
    -->

    <meta name="description" content="Check if you're lucky when using public transport in Kyiv">
    <meta name="robots" content="index, nofollow">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
    <link href="css/body.css" rel="stylesheet">


    <script src="js/lucky-logic.js"></script>


    <!-- ADD KYIV TYPE FONT
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;800&display=swap" rel="stylesheet">
    -->

    <!-- ADD PREVIEW IMAGES
        <meta property="og:image" content="icons/fb_preview2.png">
        <meta property="og:image" content="icons/fb_preview.png">
    -->

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="img/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/icons/favicon-16x16.png">
    <link rel="manifest" href="img/icons/site.webmanifest">
    <link rel="mask-icon" href="img/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="img/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="img/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
</head>

<body>
    <div class="container maincontainer">
        <div class="container">
            <div class="row d-flex justify-content-center text-center">
                <div class="col logo">
                    <img src="img/logo.png">
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col text-center">
                    <img src="img/tickets/50k.png">
                </div>
            </div>
            <div class="row justify-content-center text-center">
                <div class="col-md-12 input-column">
                    <input id="ticket" value="$$VFKHXV1U9">
                </div>
            </div>
            <div class="row justify-content-center text-center">
                <div class="col buttons">
                    <button id="about-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#about-modal">?</button> <button id="submit"  class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#result-modal" onclick="getCalculationsToForms()">Щасливий?</button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal" id="about-modal" tabindex="-1" aria-labelledby="aboutProjectLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title" id="aboutProjectLabel">Про проект</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Щасливий квиточок це така міська традиція. Якщо ви не чули про таке, спитайте у батьків або старших родичів або колег, і вони вам з радістю розкажуть.</p>
                <p>Коротко, квиток мав номер із цифр, скажімо 127217. Якщо сума перших трьох та останніх трьох однакова — квиток щасливий.</p>
                <p>Є різні трактовки, щодо того, що з цим квиточком робити. Можна покласти в гаманець на щастя. Ще казали треба з'їсти щоб вдача прийшла.</p>
                <p>Ми вирішили продовжити цю традицію після переходу на цифрові квитки. Скопіюйте код квитка з додатку «Київ Цифровий» та перевірту чи пощастило сьогодні.</p>
                <p>Як саме працює перевірка можна сприйняти як магію, або ж почитати про технічні деталі.</p>
            </div>
            <div class="modal-footer">
                <img src="img/with-love.png">
            </div>
          </div>
        </div>
    </div>

    <div class="modal" id="result-modal" tabindex="-1" aria-labelledby="checkLuckyTicketLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title" id="checkLuckyTicketLabel"></h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Класичний номер квитка <span id="old"></span></p>
                <p>Сума перших: <span id="sum1"></span><br>Сума останніх: <span id="sum2"></span></p>
            </div>
            <div class="modal-footer">
                <img src="img/with-love.png">
            </div>
          </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <script>
        function getCalculationsToForms() {
            let ticket = document.getElementById('ticket').value

            let acsiiCode = getAsciiCodeFromTicket(ticket)
            let chars = charsToSumFromCharCodes(acsiiCode)
            let oldSchoolTicketNumberValue = charsToOldSchoolTicketNumber(chars)
            

            let fisrtSum = getNumbersSum(oldSchoolTicketNumberValue, 0, 3)
            let lastSum = getNumbersSum(oldSchoolTicketNumberValue, 3, 6)

            let oldSchoolNumber = document.getElementById('old')

            oldSchoolNumber.innerText = oldSchoolTicketNumberValue

        
            let value1 = document.getElementById('sum1')
            let value2 = document.getElementById('sum2')
        
            value1.innerText = fisrtSum
            value2.innerText = lastSum
            

        
            let result = document.getElementById('checkLuckyTicketLabel')
        
            result.innerText = checkLuckyTicket(fisrtSum, lastSum)
        }

    </script>

</body>

</html>
